define(["utils/pages","utils/ajax","utils/xhrHandler","utils/deviceType","defaults"],function(t,o,s,i,e){return{name:"ajaxStaff",selector:"#ourStaff",options:{count:0,max:3,ajaxURL:e.ourStaff(),selector:"#ourStaff"},ajaxInitialize:function(){console.log(this.name+":ajaxInitialize"),this.options.ajaxSuccess=this.success,this.options.ajaxError=this.error,o.initialize(this.selector)},load:function(){console.log(this.name+":load"),this.ajaxInitialize(),console.log(this.name+":load:count:="+this.options.count),console.log(this.results),o.load(this,this.options),this.options.count=this.options.count+1},xhrCheck:function(t,o){return console.log(this.name+":xhrCheck"),console.log("<===== XHR ===>"),console.log(JSON.stringify(t)),s.check(t,o)},processData:function(t){console.log("<===== RAW DATA ===>"),console.log(t);var o=$("#content",$(t));console.log("<===== #content ===>"),console.log(o.html()),$(this.selector).html(o.html()),this.hideData(),this.fixImages(this.selector+" img"),$(this.selector).trigger("create"),this.show()},show:function(){console.log(this.name+":show"),t.show("staff")},hideData:function(){$(this.selector+' h2:contains("Download")').hide(),$(this.selector+' table[class="contentTable"]').hide(),$(this.selector+" hr").hide()},fixImages:function(t){console.log(this.name+"fixImages(selector)"),$(t).each(function(){var t=$(this).attr("src"),o=new RegExp("(http|https)://","i");o.test(t)===!1&&(t="http://fbcvr.com/"+t,$(this).attr("src",t))})},hideElements:function(t){$(t).each(function(){$(this).hide()})},success:function(t,o,s){console.log("success"),console.log(JSON.stringify(this._this.options)),console.log("selector:="+this._this.options.selector),this._this.xhrCheck(s,this._this.options.selector)===!0&&(console.log("data"),console.log(t),console.log("status:"),console.log(o),this._this.processData(t))},error:function(t){console.log("ajax error handler"),this._this.xhrCheck(t,this._this.options.selector)===!0&&(console.log(JSON.stringify(this._this.options)),this._this.load(this._this.options))},maxCount:function(){alert("handle bad results")}}});